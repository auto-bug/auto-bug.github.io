
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Nyan Board - deshipu.art</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
  
     
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="icon" type="image/png" href="../../_static/favicon.png">

  
  <link rel="alternate" type="application/atom+xml"  href="../../blog/atom.xml" title="deshipu.art">
  

  </head><body>
<div id="topbar">
<div id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <div id="logo"><a href="../../">
        <img
            src="/_static/logo.png"
            alt=""
        />deshipu.art</a></div>
</div>

<div role="main">
  <section class="tex2jax_ignore mathjax_ignore" id="nyan-board">
<h1>Nyan Board<a class="headerlink" href="#nyan-board" title="Permalink to this heading">¶</a></h1>
<p>A small ATtiny85 board playing the Nyan Cat tune.</p>
<div class="project-thumb">
<a class="reference external image-reference" href="/_images/8787551480673398340.jpg"><img alt="../../_images/thumb-8787551480673398340.jpg" src="../../_images/thumb-8787551480673398340.jpg" /></a>
<a class="reference external image-reference" href="/_images/3272621445675770492.jpg"><img alt="../../_images/thumb-3272621445675770492.jpg" src="../../_images/thumb-3272621445675770492.jpg" /></a>
<a class="reference external image-reference" href="/_images/960051445598257399.jpg"><img alt="../../_images/thumb-960051445598257399.jpg" src="../../_images/thumb-960051445598257399.jpg" /></a>
<a class="reference external image-reference" href="/_images/4626181445593540149.jpg"><img alt="../../_images/thumb-4626181445593540149.jpg" src="../../_images/thumb-4626181445593540149.jpg" /></a>
<a class="reference external image-reference" href="/_images/2776431445590942205.jpg"><img alt="../../_images/thumb-2776431445590942205.jpg" src="../../_images/thumb-2776431445590942205.jpg" /></a>
<a class="reference external image-reference" href="/_images/1866961443356063710.png"><img alt="../../_images/thumb-1866961443356063710.png" src="../../_images/thumb-1866961443356063710.png" /></a>
</div>
<iframe style="width: 500px; height: 281px;" width="500" height="281" frameborder="0" allowfullscreen="" src="https://www.youtube.com/embed/XDQEJe-PwHs"></iframe>
<section id="logs">
<h2>Logs<a class="headerlink" href="#logs" title="Permalink to this heading">¶</a></h2>
<ul class="postlist-style-none postlist simple">
<li class="ablog-post"><p class="ablog-post-title">2018-06-24 - <a class="reference internal" href="log-148360/">Corrected Repositories</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2017-03-15 - <a class="reference internal" href="log-54942/">Crazy Custom Colors</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2017-01-04 - <a class="reference internal" href="log-51328/">ATtiny10 Nyan Cat</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2017-01-01 - <a class="reference internal" href="log-51107/">ATtiny10 Board</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-31 - <a class="reference internal" href="log-51067/">ATtiny10 Working</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-30 - <a class="reference internal" href="log-51040/">ATtiny10</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-21 - <a class="reference internal" href="log-50663/">ATtiny13</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-02 - <a class="reference internal" href="log-49831/">Nyan Boards in Singles (Actually Triplets)</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-02 - <a class="reference internal" href="log-49803/">Faulty Parts</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-12-01 - <a class="reference internal" href="log-49767/">Boards Arrived</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-28 - <a class="reference internal" href="log-49638/">Schematic</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-28 - <a class="reference internal" href="log-49633/">ATtiny13</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-26 - <a class="reference internal" href="log-49557/">The Power of Plain C</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-26 - <a class="reference internal" href="log-49552/">Tabulate your Data</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-24 - <a class="reference internal" href="log-49466/">Shrunken Cat</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-23 - <a class="reference internal" href="log-49426/">Efficient Tone</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-11-21 - <a class="reference internal" href="log-49317/">Second Version</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2016-01-06 - <a class="reference internal" href="log-29974/">Doing Useful Work</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-11-09 - <a class="reference internal" href="log-27716/">Now Using PROGMEM</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-10-23 - <a class="reference internal" href="log-26942/">PCBs Are Here</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-10-23 - <a class="reference internal" href="log-26965/">Great Success</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-10-02 - <a class="reference internal" href="log-26101/">Programming ATtiny85</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-09-27 - <a class="reference internal" href="log-25930/">Melody</a></p></li>
<li class="ablog-post"><p class="ablog-post-title">2015-09-27 - <a class="reference internal" href="log-25924/">Boards Ordered</a></p></li>
</ul>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this heading">¶</a></h2>
<p>Separate a single cat from the rest of the board. You can use a rotary
tool, a scroll saw, a hand saw or a file. For best effect, round off
the edges.</p>
<img alt="../../_images/6782841445675901847.jpg" src="../../_images/6782841445675901847.jpg" />
<hr class="docutils" />
<p>If it’s a cat with holes for the eyes, you need to get rid of the
metallic layer inside the holes. Cut it with a knife until there is no
electrical connection between the pads of the LED.</p>
<img alt="../../_images/9676331445676133120.jpg" src="../../_images/9676331445676133120.jpg" />
<hr class="docutils" />
<p>Solder all the parts onto the board. Also solder an additional wire
for the reset.</p>
<img alt="../../_images/6671441445676197796.jpg" src="../../_images/6671441445676197796.jpg" />
<p>Pay attention to the polarization of the LEDs.</p>
<hr class="docutils" />
<p>Connect your programmer. I use USBASP, but there is a number of
different programmers that you can use, including an Arduino.</p>
<img alt="../../_images/8122851445676305092.jpg" src="../../_images/8122851445676305092.jpg" />
<hr class="docutils" />
<p>Follow this tutorial to setup your <a class="reference external" href="http://highlowtech.org/?p=1695">Arduino IDE</a> . You may need to run it as root. Use this arduino core: <a class="reference external" href="https://code.google.com/p/arduino-tiny/">https://code.google.com/p/arduino-tiny/</a></p>
<hr class="docutils" />
<p>Upload the following code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">BEEP_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">LED_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>

<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">LENGTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">27</span><span class="p">;</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">NOTES</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">69</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">69</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">DURATIONS</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">BPM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span><span class="p">;</span><span class="w"></span>


<span class="kt">void</span><span class="w"> </span><span class="nf">play</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">notes</span><span class="p">[],</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">durations</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bpm</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">bps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">60.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">BPM</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1000.0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">hertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="p">((</span><span class="n">notes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">69.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">12.0</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">440</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">tone</span><span class="p">(</span><span class="n">BEEP_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">hertz</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">durations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">bps</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">delay</span><span class="p">((</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">durations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">bps</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="n">toggle_eyes</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">toggle_eyes</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">blink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">blink</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">blink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">blink</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="n">BEEP_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">play</span><span class="p">(</span><span class="n">NOTES</span><span class="p">,</span><span class="w"> </span><span class="n">DURATIONS</span><span class="p">,</span><span class="w"> </span><span class="n">BPM</span><span class="p">,</span><span class="w"> </span><span class="n">LENGTH</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<p>Disconnect the programmer, and connect a power source (from 3V to 5V)
to the brown (minus) and red (plus) wires. You should hear music and
the eyes should blink. Congratulations.</p>
<p>You can now glue the speaker to the back of the cat, and it’s
finished.</p>
</section>
</section>


</div>
  </body>
</html>