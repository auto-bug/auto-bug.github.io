
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>18-channel Servo Shield - deshipu.art</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
  
     
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="icon" type="image/png" href="../../../_static/favicon.png">

  
  <link rel="alternate" type="application/atom+xml"  href="../../../blog/atom.xml" title="deshipu.art">
  

  </head><body>
<div id="topbar">
<div id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <div id="logo"><a href="../../../">
        <img
            src="/_static/logo.png"
            alt=""
        />deshipu.art</a></div>
</div>

<div role="main">
  <section class="tex2jax_ignore mathjax_ignore" id="channel-servo-shield">
<h1>18-channel Servo Shield<a class="headerlink" href="#channel-servo-shield" title="Permalink to this heading">¶</a></h1>
<p>Published on 2016-09-14 in <a class="reference internal" href="../#project-13278"><span class="std std-ref">Servo Breakout for WeMos D1 Mini</span></a>.</p>
<p>The second approach is to actually use an ATmega328p chip
communicating over I2C with the ESP8266, to generate PWM for 18
different servos. I had the code already from my <span class="xref std std-ref">project-9131</span> , so all I needed was a PCB for it. I considered using a Pro Mini here
too, but finally decided that a bare atmega is enough – I don’t need
an external oscilator, because neither the servo signal nor I2C are
sensitive to timing differences.</p>
<img alt="../../../_images/2862981473855334998.jpg" src="../../../_images/2862981473855334998.jpg" />
<p>So I received the PCBs from OSHPark, and assembled the shield. And of
course I had a short between the 3.3V pin and the ground. One of the
vias on my design got moved by mistake, and touched the ground fill.
Fortunately that was easily fixed with a knife.</p>
<p>Then I connected my USBASP programmer, and with great help from <a class="reference external" href="https://hackaday.io/hacker/7607">&#64;Christoph</a>  flashed the blink sketch, set the fuses to the right values, tested
it, and then flashed my program.</p>
<p>First tests show that it works, except that for some reason I need to
lower the frequency of the I2C bus to 150kHz from the default 400kHz,
otherwise the slave gets stuck with its SDA pulled down as soon as it
receives the second byte of transmission. I will poke at it some more
and hopefully figure out what’s wrong there.</p>
</section>


</div>
  </body>
</html>